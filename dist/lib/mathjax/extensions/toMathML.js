MathJax.Hub.Register.LoadHook("[MathJax]/jax/element/mml/jax.js",function(){var t=MathJax.ElementJax.mml;SETTINGS=MathJax.Hub.config.menuSettings,t.mbase.Augment({toMathML:function(t){var a=this.inferred&&this.parent.inferRow;null==t&&(t="");var i=this.type,h=this.toMathMLattributes();if("mspace"===i)return t+"<"+i+h+" />";for(var s=[],n=this.isToken?"":t+(a?"":"  "),e=0,o=this.data.length;o>e;e++)this.data[e]?s.push(this.data[e].toMathML(n)):this.isToken||this.isChars||s.push(n+"<mrow />");return this.isToken?t+"<"+i+h+">"+s.join("")+"</"+i+">":a?s.join("\n"):0===s.length||1===s.length&&""===s[0]?t+"<"+i+h+" />":t+"<"+i+h+">\n"+s.join("\n")+"\n"+t+"</"+i+">"},toMathMLattributes:function(){var a=[],i=this.defaults,h=this.attrNames||t.copyAttributeNames,s=t.skipAttributes;if("math"!==this.type||this.attr&&this.attr.xmlns||a.push('xmlns="http://www.w3.org/1998/Math/MathML"'),!this.attrNames){"mstyle"===this.type&&(i=t.math.prototype.defaults);for(var n in i)if(!s[n]&&i.hasOwnProperty(n)){var e="open"===n||"close"===n||"form"===n;if(null!=this[n]&&(e||this[n]!==i[n])){var o=this[n];delete this[n],(e||this.Get(n)!==o)&&a.push(n+'="'+this.toMathMLattribute(o)+'"'),this[n]=o}}}for(var r=0,u=h.length;u>r;r++)"class"!==h[r]&&(o=(this.attr||{})[h[r]],null==o&&(o=this[h[r]]),null!=o&&a.push(h[r]+'="'+this.toMathMLquote(o)+'"'));return this.toMathMLclass(a),a.length?" "+a.join(" "):""},toMathMLclass:function(a){var i=[];if(this["class"]&&i.push(this["class"]),this.isa(t.TeXAtom)&&SETTINGS.texHints){var h=["ORD","OP","BIN","REL","OPEN","CLOSE","PUNCT","INNER","VCENTER"][this.texClass];h&&i.push("MJX-TeXAtom-"+h)}this.mathvariant&&this.toMathMLvariants[this.mathvariant]&&i.push("MJX"+this.mathvariant),this.variantForm&&i.push("MJX-variant"),i.length&&a.unshift('class="'+i.join(" ")+'"')},toMathMLattribute:function(t){return"string"==typeof t&&t.replace(/ /g,"").match(/^(([-+])?(\d+(\.\d*)?|\.\d+))mu$/)?RegExp.$2+(1/18*RegExp.$3).toFixed(3).replace(/\.?0+$/,"")+"em":this.toMathMLvariants[t]?this.toMathMLvariants[t]:this.toMathMLquote(t)},toMathMLvariants:{"-tex-caligraphic":t.VARIANT.SCRIPT,"-tex-caligraphic-bold":t.VARIANT.BOLDSCRIPT,"-tex-oldstyle":t.VARIANT.NORMAL,"-tex-oldstyle-bold":t.VARIANT.BOLD,"-tex-mathit":t.VARIANT.ITALIC},toMathMLquote:function(t){t=String(t).split("");for(var a=0,i=t.length;i>a;a++){var h=t[a].charCodeAt(0);if(55295>=h||h>=57344)if(32>h||h>126)t[a]="&#x"+h.toString(16).toUpperCase()+";";else{var s={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;"}[t[a]];s&&(t[a]=s)}else if(i>a+1){var n=t[a+1].charCodeAt(0),e=(h-55296<<10)+(n-56320)+65536;t[a]="&#x"+e.toString(16).toUpperCase()+";",t[a+1]="",a++}else t[a]=""}return t.join("")}}),t.math.Augment({toMathML:function(t,a){var i;null==t&&(t=""),a&&a.originalText&&SETTINGS.semantics&&(i=MathJax.InputJax[a.inputJax].annotationEncoding);for(var h=this.data[0]&&this.data[0].data.length>1,s=this.type,n=this.toMathMLattributes(),e=[],o=t+(i?"    ":"")+(h?"  ":""),r=0,u=this.data.length;u>r;r++)e.push(this.data[r]?this.data[r].toMathML(o):o+"<mrow />");if(0===e.length||1===e.length&&""===e[0]){if(!i)return"<"+s+n+" />";e.push(o+"<mrow />")}return i&&(h&&(e.unshift(t+"    <mrow>"),e.push(t+"    </mrow>")),e.unshift(t+"  <semantics>"),e.push(t+'    <annotation encoding="'+i+'">'+a.originalText+"</annotation>"),e.push(t+"  </semantics>")),t+"<"+s+n+">\n"+e.join("\n")+"\n"+t+"</"+s+">"}}),t.msubsup.Augment({toMathML:function(t){var a=this.type;null==this.data[this.sup]&&(a="msub"),null==this.data[this.sub]&&(a="msup");var i=this.toMathMLattributes();delete this.data[0].inferred;for(var h=[],s=0,n=this.data.length;n>s;s++)this.data[s]&&h.push(this.data[s].toMathML(t+"  "));return t+"<"+a+i+">\n"+h.join("\n")+"\n"+t+"</"+a+">"}}),t.munderover.Augment({toMathML:function(t){var a=this.type;null==this.data[this.under]&&(a="mover"),null==this.data[this.over]&&(a="munder");var i=this.toMathMLattributes();delete this.data[0].inferred;for(var h=[],s=0,n=this.data.length;n>s;s++)this.data[s]&&h.push(this.data[s].toMathML(t+"  "));return t+"<"+a+i+">\n"+h.join("\n")+"\n"+t+"</"+a+">"}}),t.TeXAtom.Augment({toMathML:function(t){var a=this.toMathMLattributes();return a||1!==this.data[0].data.length?t+"<mrow"+a+">\n"+this.data[0].toMathML(t+"  ")+"\n"+t+"</mrow>":t.substr(2)+this.data[0].toMathML(t)}}),t.chars.Augment({toMathML:function(t){return(t||"")+this.toMathMLquote(this.toString())}}),t.entity.Augment({toMathML:function(t){return(t||"")+"&"+this.data[0]+";<!-- "+this.toString()+" -->"}}),t.xml.Augment({toMathML:function(t){return(t||"")+this.toString()}}),MathJax.Hub.Register.StartupHook("TeX mathchoice Ready",function(){t.TeXmathchoice.Augment({toMathML:function(t){return this.Core().toMathML(t)}})}),MathJax.Hub.Startup.signal.Post("toMathML Ready")}),MathJax.Ajax.loadComplete("[MathJax]/extensions/toMathML.js");