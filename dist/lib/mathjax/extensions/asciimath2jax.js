MathJax.Extension.asciimath2jax={version:"2.4.0",config:{delimiters:[["`","`"]],skipTags:["script","noscript","style","textarea","pre","code","annotation","annotation-xml"],ignoreClass:"asciimath2jax_ignore",processClass:"asciimath2jax_process",preview:"AsciiMath"},PreProcess:function(e){this.configured||(this.config=MathJax.Hub.CombineConfig("asciimath2jax",this.config),this.config.Augment&&MathJax.Hub.Insert(this,this.config.Augment),this.configured=!0),"string"==typeof e&&(e=document.getElementById(e)),e||(e=document.body),this.createPatterns()&&this.scanElement(e,e.nextSibling)},createPatterns:function(){var e,t,n=[],s=this.config;if(this.match={},0===s.delimiters.length)return!1;for(e=0,t=s.delimiters.length;t>e;e++)n.push(this.patternQuote(s.delimiters[e][0])),this.match[s.delimiters[e][0]]={mode:"",end:s.delimiters[e][1],pattern:this.endPattern(s.delimiters[e][1])};this.start=new RegExp(n.sort(this.sortLength).join("|"),"g"),this.skipTags=new RegExp("^("+s.skipTags.join("|")+")$","i");var i=[];return MathJax.Hub.config.preRemoveClass&&i.push(MathJax.Hub.config.preRemoveClass),s.ignoreClass&&i.push(s.ignoreClass),this.ignoreClass=i.length?new RegExp("(^| )("+i.join("|")+")( |$)"):/^$/,this.processClass=new RegExp("(^| )("+s.processClass+")( |$)"),!0},patternQuote:function(e){return e.replace(/([\^$(){}+*?\-|\[\]\:\\])/g,"\\$1")},endPattern:function(e){return new RegExp(this.patternQuote(e)+"|\\\\.","g")},sortLength:function(e,t){return e.length!==t.length?t.length-e.length:e==t?0:t>e?-1:1},scanElement:function(e,t,n){for(var s,i,a,r;e&&e!=t;)"#text"===e.nodeName.toLowerCase()?n||(e=this.scanText(e)):(s="undefined"==typeof e.className?"":e.className,i="undefined"==typeof e.tagName?"":e.tagName,"string"!=typeof s&&(s=String(s)),r=this.processClass.exec(s),!e.firstChild||s.match(/(^| )MathJax/)||!r&&this.skipTags.exec(i)||(a=(n||this.ignoreClass.exec(s))&&!r,this.scanElement(e.firstChild,t,a))),e&&(e=e.nextSibling)},scanText:function(e){if(""==e.nodeValue.replace(/\s+/,""))return e;var t,n;for(this.search={start:!0},this.pattern=this.start;e;){for(this.pattern.lastIndex=0;e&&"#text"===e.nodeName.toLowerCase()&&(t=this.pattern.exec(e.nodeValue));)e=this.search.start?this.startMatch(t,e):this.endMatch(t,e);if(this.search.matched&&(e=this.encloseMath(e)),e){do n=e,e=e.nextSibling;while(e&&("br"===e.nodeName.toLowerCase()||"#comment"===e.nodeName.toLowerCase()));if(!e||"#text"!==e.nodeName)return n}}return e},startMatch:function(e,t){var n=this.match[e[0]];return null!=n&&(this.search={end:n.end,mode:n.mode,open:t,olen:e[0].length,opos:this.pattern.lastIndex-e[0].length},this.switchPattern(n.pattern)),t},endMatch:function(e,t){return e[0]==this.search.end&&(this.search.close=t,this.search.cpos=this.pattern.lastIndex,this.search.clen=this.search.isBeginEnd?0:e[0].length,this.search.matched=!0,t=this.encloseMath(t),this.switchPattern(this.start)),t},switchPattern:function(e){e.lastIndex=this.pattern.lastIndex,this.pattern=e,this.search.start=e===this.start},encloseMath:function(){var e,t,n=this.search,s=n.close;for(s=n.cpos===s.length?s.nextSibling:s.splitText(n.cpos),s||(e=s=MathJax.HTML.addText(n.close.parentNode,"")),n.close=s,t=n.opos?n.open.splitText(n.opos):n.open;t.nextSibling&&t.nextSibling!==s;)t.nodeValue+=null!==t.nextSibling.nodeValue?"#comment"===t.nextSibling.nodeName?t.nextSibling.nodeValue.replace(/^\[CDATA\[((.|\n|\r)*)\]\]$/,"$1"):t.nextSibling.nodeValue:this.msieNewlineBug&&"br"===t.nextSibling.nodeName.toLowerCase()?"\n":" ",t.parentNode.removeChild(t.nextSibling);var i=t.nodeValue.substr(n.olen,t.nodeValue.length-n.olen-n.clen);return t.parentNode.removeChild(t),"none"!==this.config.preview&&this.createPreview(n.mode,i),t=this.createMathTag(n.mode,i),this.search={},this.pattern.lastIndex=0,e&&e.parentNode.removeChild(e),t},insertNode:function(e){var t=this.search;t.close.parentNode.insertBefore(e,t.close)},createPreview:function(e,t){var n=this.config.preview;"none"!==n&&("AsciiMath"===n&&(n=[this.filterPreview(t)]),n&&(n=MathJax.HTML.Element("span",{className:MathJax.Hub.config.preRemoveClass},n),this.insertNode(n)))},createMathTag:function(e,t){var n=document.createElement("script");return n.type="math/asciimath"+e,MathJax.HTML.setScript(n,t),this.insertNode(n),n},filterPreview:function(e){return e},msieNewlineBug:MathJax.Hub.Browser.isMSIE&&(document.documentMode||0)<9},MathJax.Hub.Register.PreProcessor(["PreProcess",MathJax.Extension.asciimath2jax]),MathJax.Ajax.loadComplete("[MathJax]/extensions/asciimath2jax.js");