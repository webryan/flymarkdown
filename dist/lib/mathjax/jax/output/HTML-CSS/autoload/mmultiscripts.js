MathJax.Hub.Register.StartupHook("HTML-CSS Jax Ready",function(){var t=MathJax.ElementJax.mml,a=MathJax.OutputJax["HTML-CSS"];t.mmultiscripts.Augment({toHTML:function(t,s,b){t=this.HTMLcreateSpan(t);var e,o=this.HTMLgetScale(),x=a.createStack(t),i=a.createBox(x);if(this.data[this.base]){var h=this.data[this.base].toHTML(i);null!=b?this.data[this.base].HTMLstretchV(i,s,b):null!=s&&this.data[this.base].HTMLstretchH(i,s),a.Measured(h,i)}else i.bbox=this.HTMLzeroBBox();for(var r=a.TeX.x_height*o,p=a.TeX.scriptspace*o*.75,c=this.HTMLgetScripts(x,p),l=c[0],u=c[1],M=c[2],d=c[3],m=o,w=1;w<this.data.length;w++)if(this.data[w]&&this.data[w].spanID){m=this.data[w].HTMLgetScale();break}var n,T=a.TeX.sup_drop*m,H=a.TeX.sub_drop*m,f=i.bbox.h-T,L=i.bbox.d+H,B=0;i.bbox.ic&&(B=i.bbox.ic),!this.data[this.base]||"mi"!==this.data[this.base].type&&"mo"!==this.data[this.base].type||1!==this.data[this.base].data.join("").length||1!==i.bbox.scale||this.data[this.base].Get("largeop")||(f=L=0);var g=this.getValues("subscriptshift","superscriptshift"),S=this.HTMLgetMu(t);g.subscriptshift=""===g.subscriptshift?0:a.length2em(g.subscriptshift,S),g.superscriptshift=""===g.superscriptshift?0:a.length2em(g.superscriptshift,S);var y=0;if(M?y=M.bbox.w+B:d&&(y=d.bbox.w-B),0>y&&(y=0),a.placeBox(i,y,0),u||d)if(l||M){L=Math.max(L,a.TeX.sub2*o);var v=a.TeX.rule_thickness*o,J=(l||M).bbox.h,X=(u||d).bbox.d;M&&(J=Math.max(J,M.bbox.h)),d&&(X=Math.max(X,d.bbox.d)),3*v>f-X-(J-L)&&(L=3*v-f+X+J,T=.8*r-(f-X),T>0&&(f+=T,L-=T)),f=Math.max(f,g.superscriptshift),L=Math.max(L,g.subscriptshift),u&&a.placeBox(u,y+i.bbox.w+p,f),d&&a.placeBox(d,y+B-d.bbox.w,f),l&&a.placeBox(l,y+i.bbox.w+p-B,-L),M&&a.placeBox(M,y-M.bbox.w,-L)}else e=this.getValues("displaystyle","texprimestyle"),n=a.TeX[e.displaystyle?"sup1":e.texprimestyle?"sup3":"sup2"],f=Math.max(f,n*o,g.superscriptshift),u&&(f=Math.max(f,u.bbox.d+.25*r)),d&&(f=Math.max(f,d.bbox.d+.25*r)),u&&a.placeBox(u,y+i.bbox.w+p,f),d&&a.placeBox(d,0,f);else L=Math.max(L,a.TeX.sub1*o,g.subscriptshift),l&&(L=Math.max(L,l.bbox.h-.8*r)),M&&(L=Math.max(L,M.bbox.h-.8*r)),l&&a.placeBox(l,y+i.bbox.w+p-B,-L),M&&a.placeBox(M,0,-L);this.HTMLhandleSpace(t),this.HTMLhandleColor(t);var k=t.bbox;return k.dx=y,k.s=p,k.u=f,k.v=L,k.delta=B,k.px=y+i.bbox.w,t},HTMLgetScripts:function(t,s){for(var b,e,o=[],x=1,i=this.data.length,h=0,r=0;4>r;r+=2){for(;i>x&&"mprescripts"!==this.data[x].type;){for(var p=r;r+2>p;p++)this.data[x]&&"none"!==this.data[x].type&&(o[p]||(o[p]=a.createBox(t),o[p].bbox=this.HTMLemptyBBox({}),h&&(a.createBlank(o[p],h),o[p].bbox.w=o[p].bbox.rw=h)),this.data[x].toHTML(o[p]),this.HTMLcombineBBoxes(this.data[x],o[p].bbox)),x++;e=o[r],b=o[r+1],e&&b&&(e.bbox.w<b.bbox.w?(a.createBlank(e,b.bbox.w-e.bbox.w),e.bbox.w=b.bbox.w,e.bbox.rw=Math.max(e.bbox.w,e.bbox.rw)):e.bbox.w>b.bbox.w&&(a.createBlank(b,e.bbox.w-b.bbox.w),b.bbox.w=e.bbox.w,b.bbox.rw=Math.max(b.bbox.w,b.bbox.rw))),e?h=e.bbox.w:b&&(h=b.bbox.w)}x++,h=0}for(p=0;4>p;p++)o[p]&&(o[p].bbox.w+=s,o[p].bbox.rw=Math.max(o[p].bbox.w,o[p].bbox.rw),o[p].bbox.name=["sub","sup","presub","presup"][p],this.HTMLcleanBBox(o[p].bbox));return o},HTMLstretchH:t.mbase.HTMLstretchH,HTMLstretchV:t.mbase.HTMLstretchV}),MathJax.Hub.Startup.signal.Post("HTML-CSS mmultiscripts Ready"),MathJax.Ajax.loadComplete(a.autoloadDir+"/mmultiscripts.js")});