MathJax.Hub.Register.StartupHook("HTML-CSS Jax Ready",function(){var e=MathJax.ElementJax.mml,t=MathJax.OutputJax["HTML-CSS"],i={newline:0,nobreak:1e6,goodbreak:[-200],badbreak:[200],auto:[0],toobig:800,nestfactor:400,spacefactor:-100,spaceoffset:2,spacelimit:1,fence:500,close:500},n={linebreakstyle:"after"};e.mbase.Augment({HTMLlinebreakPenalty:i,HTMLmultiline:function(a){for(var s=this;s.inferred||s.parent&&"mrow"===s.parent.type&&1===s.parent.data.length;)s=s.parent;var l="math"===s.type&&"block"===s.Get("display")||"mtd"===s.type;s.isMultiline=!0;var h=this.getValues("linebreak","linebreakstyle","lineleading","linebreakmultchar","indentalign","indentshift","indentalignfirst","indentshiftfirst","indentalignlast","indentshiftlast");h.linebreakstyle===e.LINEBREAKSTYLE.INFIXLINEBREAKSTYLE&&(h.linebreakstyle=this.Get("infixlinebreakstyle")),h.lineleading=t.length2em(h.lineleading,1,.5),this.HTMLremoveColor(a);var r=t.createStack(a);this.HTMLgetScale();for(var d={n:0,Y:0,scale:this.scale||1,isTop:l,values:{},VALUES:h},o=this.HTMLgetAlign(d,{}),L=this.HTMLgetShift(d,{},o),b=[],f={index:[],penalty:i.nobreak,w:0,W:L,shift:L,scanW:L,nest:0},T=!1;this.HTMLbetterBreak(f,d)&&(f.scanW>=t.linebreakWidth||f.penalty===i.newline);)this.HTMLaddLine(r,b,f.index,d,f.values,T),b=f.index.slice(0),T=!0,o=this.HTMLgetAlign(d,f.values),L=this.HTMLgetShift(d,f.values,o),o===e.INDENTALIGN.CENTER&&(L=0),f.W=f.shift=f.scanW=L,f.penalty=i.nobreak;return d.isLast=!0,this.HTMLaddLine(r,b,[],d,n,T),l&&(r.style.width="100%","math"===s.type&&(a.bbox.width="100%")),this.HTMLhandleSpace(a),this.HTMLhandleColor(a),a.bbox.isMultiline=!0,a},HTMLbetterBreak:function(e,n){if(this.isToken)return!1;if(this.isEmbellished())return e.embellished=this,this.CoreMO().HTMLbetterBreak(e,n);if(this.linebreakContainer)return!1;var a,s,l,h=e.index.slice(0),r=e.index.shift(),d=this.data.length,o=e.index.length>0,L=!1;for(null==r&&(r=-1),o||(r++,e.W+=e.w,e.w=0),l=e.scanW=e.W,e.nest++;d>r&&e.scanW<1.33*t.linebreakWidth;){if(this.data[r]){if(this.data[r].HTMLbetterBreak(e,n)&&(L=!0,h=[r].concat(e.index),a=e.W,s=e.w,e.penalty===i.newline))return e.index=h,e.nest&&e.nest--,!0;l=o?e.scanW:this.HTMLaddWidth(r,e,l)}e.index=[],r++,o=!1}return e.nest&&e.nest--,e.index=h,L&&(e.W=a,e.w=s),L},HTMLaddWidth:function(e,i,n){if(this.data[e]){var a=this.data[e].HTMLspanElement();n+=a.bbox.w,a.style.paddingLeft&&(n+=t.unEm(a.style.paddingLeft)),a.style.paddingRight&&(n+=t.unEm(a.style.paddingRight)),i.W=i.scanW=n,i.w=0}return n},HTMLaddLine:function(i,n,a,s,l,h){line=t.createBox(i),line.bbox=this.HTMLemptyBBox({}),s.first=h,s.last=!0,this.HTMLmoveLine(n,a,line,s,l),this.HTMLcleanBBox(line.bbox);var r=this.HTMLgetAlign(s,l),d=this.HTMLgetShift(s,l,r);if(d&&(t.createBlank(line,d,r!==e.INDENTALIGN.RIGHT),line.bbox.w+=d,line.bbox.rw+=d),s.n>0){var o=t.FONTDATA.baselineskip*s.scale,L=(null==s.values.lineleading?s.VALUES:s.values).lineleading*s.scale;s.Y-=Math.max(o,s.d+line.bbox.h+L)}t.alignBox(line,r,s.Y),s.d=line.bbox.d,s.values=l,s.n++},HTMLgetAlign:function(t,i){var n,a=i,s=t.values,l=t.VALUES;return n=0===t.n?a.indentalignfirst||s.indentalignfirst||l.indentalignfirst:t.isLast?s.indentalignlast||l.indentalignlast:s.indentalign||l.indentalign,n===e.INDENTALIGN.INDENTALIGN&&(n=s.indentalign||l.indentalign),n===e.INDENTALIGN.AUTO&&(n=t.isTop?this.displayAlign:e.INDENTALIGN.LEFT),n},HTMLgetShift:function(i,n,a){if(a===e.INDENTALIGN.CENTER)return 0;var s,l=n,h=i.values,r=i.VALUES;return s=0===i.n?l.indentshiftfirst||h.indentshiftfirst||r.indentshiftfirst:i.isLast?h.indentshiftlast||r.indentshiftlast:h.indentshift||r.indentshift,s===e.INDENTSHIFT.INDENTSHIFT&&(s=h.indentshift||r.indentshift),("auto"===s||""===s)&&(s=i.isTSop?this.displayIndent:"0"),t.length2em(s,0)},HTMLmoveLine:function(e,t,i,n,a){var s=e[0],l=t[0];if(null==s&&(s=-1),null==l&&(l=this.data.length-1),s===l&&e.length>1)this.data[s].HTMLmoveSlice(e.slice(1),t.slice(1),i,n,a,"paddingLeft");else{var h=n.last;for(n.last=!1;l>s;)this.data[s]&&(e.length<=1?this.data[s].HTMLmoveSpan(i,n,a):this.data[s].HTMLmoveSlice(e.slice(1),[],i,n,a,"paddingLeft")),s++,n.first=!1,e=[];n.last=h,this.data[s]&&(t.length<=1?this.data[s].HTMLmoveSpan(i,n,a):this.data[s].HTMLmoveSlice([],t.slice(1),i,n,a,"paddingRight"))}},HTMLmoveSlice:function(e,t,i,n,a,s){this.HTMLremoveColor();var l=this.HTMLcreateSliceSpan(i);if(this.HTMLmoveLine(e,t,l,n,a),l.style[s]="",this.HTMLcombineBBoxes(l,i.bbox),this.HTMLcleanBBox(l.bbox),0===t.length){i=this.HTMLspanElement(),i.parentNode.removeChild(i),i.nextMathJaxSpan.id=i.id;for(var h=0;i=i.nextMathJaxSpan;){var r=this.HTMLhandleColor(i);r&&(r.id+="-MathJax-Continue-"+h,h++)}}return l},HTMLcreateSliceSpan:function(e){for(var t=this.HTMLspanElement(),i=0,n=t;n.nextMathJaxSpan;)n=n.nextMathJaxSpan,i++;var a=t.cloneNode(!1);return n.nextMathJaxSpan=a,a.nextMathJaxSpan=null,a.id+="-MathJax-Continue-"+i,a.bbox=this.HTMLemptyBBox({}),e.appendChild(a)},HTMLmoveSpan:function(i,n,a){if(!n.first&&!n.last||n.first&&n.values.linebreakstyle===e.LINEBREAKSTYLE.BEFORE||n.last&&a.linebreakstyle===e.LINEBREAKSTYLE.AFTER){var s=document.getElementById("MathJax-Color-"+this.spanID+t.idPostfix);s&&i.appendChild(s);var l=this.HTMLspanElement();i.appendChild(l),n.last&&(l.style.paddingRight=""),(n.first||n.nextIsFirst)&&(l.style.paddingLeft="",s&&(this.HTMLremoveColor(l),this.HTMLhandleColor(l))),n.first&&0===l.bbox.w?n.nextIsFirst=!0:delete n.nextIsFirst,this.HTMLcombineBBoxes(this,i.bbox)}}}),e.mfenced.Augment({HTMLbetterBreak:function(e,n){var a,s,l,h=e.index.slice(0),r=e.index.shift(),d=this.data.length,o=e.index.length>0,L=!1;if(null==r&&(r=-1),o||(r++,e.W+=e.w,e.w=0),l=e.scanW=e.W,e.nest++,!this.dataI){this.dataI=[],this.data.open&&this.dataI.push("open"),d&&this.dataI.push(0);for(var b=1;d>b;b++)this.data["sep"+b]&&this.dataI.push("sep"+b),this.dataI.push(b);this.data.close&&this.dataI.push("close")}for(d=this.dataI.length;d>r&&e.scanW<1.33*t.linebreakWidth;){var f=this.dataI[r];if(this.data[f]){if(this.data[f].HTMLbetterBreak(e,n)&&(L=!0,h=[r].concat(e.index),a=e.W,s=e.w,e.penalty===i.newline))return e.index=h,e.nest&&e.nest--,!0;l=o?e.scanW:this.HTMLaddWidth(r,e,l)}e.index=[],r++,o=!1}return e.nest&&e.nest--,e.index=h,L&&(e.W=a,e.w=s),L},HTMLmoveLine:function(e,t,i,n,a){var s=e[0],l=t[0];if(null==s&&(s=-1),null==l&&(l=this.dataI.length-1),s===l&&e.length>1)this.data[this.dataI[s]].HTMLmoveSlice(e.slice(1),t.slice(1),i,n,a,"paddingLeft");else{var h=n.last;n.last=!1;for(var r=this.dataI[s];l>s;)this.data[r]&&(e.length<=1?this.data[r].HTMLmoveSpan(i,n,a):this.data[r].HTMLmoveSlice(e.slice(1),[],i,n,a,"paddingLeft")),s++,r=this.dataI[s],n.first=!1,e=[];n.last=h,this.data[r]&&(t.length<=1?this.data[r].HTMLmoveSpan(i,n,a):this.data[r].HTMLmoveSlice([],t.slice(1),i,n,a,"paddingRight"))}}}),e.msubsup.Augment({HTMLbetterBreak:function(e,t){if(!this.data[this.base])return!1;var n,a,s,l=e.index.slice(0),h=e.index.shift(),r=e.index.length>0,d=!1;return r||(e.W+=e.w,e.w=0),s=e.scanW=e.W,null==h&&(this.HTMLbaseW=this.data[this.base].HTMLspanElement().bbox.w,this.HTMLdw=this.HTMLspanElement().bbox.w-this.HTMLbaseW),this.data[this.base].HTMLbetterBreak(e,t)&&(d=!0,l=[this.base].concat(e.index),n=e.W,a=e.w,e.penalty===i.newline&&(d=r=!0)),r||this.HTMLaddWidth(this.base,e,s),e.scanW+=this.HTMLdw,e.W=e.scanW,e.index=[],d&&(e.W=n,e.w=a,e.index=l),d},HTMLmoveLine:function(e,i,n,a,s){if(this.data[this.base]&&(e.length>1?this.data[this.base].HTMLmoveSlice(e.slice(1),i.slice(1),n,a,s,"paddingLeft"):i.length<=1?this.data[this.base].HTMLmoveSpan(n,a,s):this.data[this.base].HTMLmoveSlice([],i.slice(1),n,a,s,"paddingRight")),0===i.length){var l=this.data[this.sup]||this.data[this.sub];if(l){var h=l.HTMLspanElement().parentNode,r=h.parentNode;for(this.data[this.base]&&r.removeChild(r.firstChild),h=r.firstChild;h;h=h.nextSibling)h.style.left=t.Em(t.unEm(h.style.left)-this.HTMLbaseW);r.bbox.w-=this.HTMLbaseW,r.style.width=t.Em(r.bbox.w),this.HTMLcombineBBoxes(r,n.bbox),n.appendChild(r)}}}}),e.mmultiscripts.Augment({HTMLbetterBreak:function(e,t){if(!this.data[this.base])return!1;var n,a,s,l=e.index.slice(0),h=(e.index.shift(),e.index.length>0),r=!1;h||(e.W+=e.w,e.w=0),e.scanW=e.W;var d=this.HTMLspanElement().bbox,o=this.data[this.base].HTMLspanElement().bbox,L=d.w-o.w;return e.scanW+=d.dx,s=e.scanW,this.data[this.base].HTMLbetterBreak(e,t)&&(r=!0,l=[this.base].concat(e.index),n=e.W,a=e.w,e.penalty===i.newline&&(r=h=!0)),h||this.HTMLaddWidth(this.base,e,s),e.scanW+=L,e.W=e.scanW,e.index=[],r&&(e.W=n,e.w=a,e.index=l),r},HTMLmoveLine:function(e,i,n,a,s){var l=this.HTMLspanElement(),h=l.bbox,r=l.firstChild,d={};t.msiePaddingWidthBug&&(r=r.nextSibling);for(var o=r.firstChild;o;)o.bbox&&o.bbox.name&&(d[o.bbox.name]=o),o=o.nextSibling;if(e.length<1&&(d.presub||d.presup)){var L=t.createStack(n);d.presup&&(t.addBox(L,d.presup),t.placeBox(d.presup,h.dx-d.presup.bbox.w,h.u)),d.presub&&(t.addBox(L,d.presub),t.placeBox(d.presub,h.dx+h.delta-d.presub.bbox.w,-h.v)),this.HTMLcombineBBoxes(L,n.bbox),n.appendChild(L),L.style.width=t.Em(h.dx)}if(this.data[this.base]&&(e.length>1?this.data[this.base].HTMLmoveSlice(e.slice(1),i.slice(1),n,a,s,"paddingLeft"):i.length<=1?this.data[this.base].HTMLmoveSpan(n,a,s):this.data[this.base].HTMLmoveSlice([],i.slice(1),n,a,s,"paddingRight")),0===i.length){for(this.data[this.base]&&r.removeChild(r.firstChild),o=r.firstChild;o;o=o.nextSibling)o.style.left=t.Em(t.unEm(o.style.left)-h.px);r.bbox.w-=h.px,r.style.width=t.Em(r.bbox.w),this.HTMLcombineBBoxes(r,n.bbox),n.appendChild(r)}}}),e.mo.Augment({HTMLbetterBreak:function(n,a){if(n.values&&n.values.id===this.spanID)return!1;var s=this.getValues("linebreak","linebreakstyle","lineleading","linebreakmultchar","indentalign","indentshift","indentalignfirst","indentshiftfirst","indentalignlast","indentshiftlast","texClass","fence");s.linebreakstyle===e.LINEBREAKSTYLE.INFIXLINEBREAKSTYLE&&(s.linebreakstyle=this.Get("infixlinebreakstyle")),s.texClass===e.TEXCLASS.OPEN&&n.nest++,s.texClass===e.TEXCLASS.CLOSE&&n.nest&&n.nest--;var l=n.scanW,h=n.embellished||this;delete n.embellished;var r=h.HTMLspanElement(),d=r.bbox.w;if(r.style.paddingLeft&&(d+=t.unEm(r.style.paddingLeft)),s.linebreakstyle===e.LINEBREAKSTYLE.AFTER&&(l+=d,d=0),l-n.shift===0&&s.linebreak!==e.LINEBREAK.NEWLINE)return!1;var o=t.linebreakWidth-l;if(0===a.n&&(s.indentshiftfirst!==a.VALUES.indentshiftfirst||s.indentalignfirst!==a.VALUES.indentalignfirst)){var L=this.HTMLgetAlign(a,s),b=this.HTMLgetShift(a,s,L);o+=n.shift-b}var f=Math.floor(o/t.linebreakWidth*1e3);0>f&&(f=i.toobig-3*f),s.fence&&(f+=i.fence),(s.linebreakstyle===e.LINEBREAKSTYLE.AFTER&&s.texClass===e.TEXCLASS.OPEN||s.texClass===e.TEXCLASS.CLOSE)&&(f+=i.close),f+=n.nest*i.nestfactor;var T=i[s.linebreak||e.LINEBREAK.AUTO];return T instanceof Array?f=Math.max(1,f+T[0]*n.nest):o>=0&&(f=T*n.nest),f>=n.penalty?!1:(n.penalty=f,n.values=s,n.W=l,n.w=d,s.lineleading=t.length2em(s.lineleading,a.VALUES.lineleading),s.id=this.spanID,!0)}}),e.mspace.Augment({HTMLbetterBreak:function(n,a){if(n.values&&n.values.id===this.spanID)return!1;var s=this.getValues("linebreak"),l=s.linebreak;(!l||this.hasDimAttr())&&(l=e.LINEBREAK.AUTO);var h=n.scanW,r=this.HTMLspanElement(),d=r.bbox.w;if(r.style.paddingLeft&&(d+=t.unEm(r.style.paddingLeft)),h-n.shift===0)return!1;var o=t.linebreakWidth-h,L=Math.floor(o/t.linebreakWidth*1e3);0>L&&(L=i.toobig-3*L),L+=n.nest*i.nestfactor;var b=i[l];return l===e.LINEBREAK.AUTO&&d>=i.spacelimit&&!this.mathbackground&&!this.background&&(b=[(d+i.spaceoffset)*i.spacefactor]),b instanceof Array?L=Math.max(1,L+b[0]*n.nest):o>=0&&(L=b*n.nest),L>=n.penalty?!1:(n.penalty=L,n.values=s,n.W=h,n.w=d,s.lineleading=a.VALUES.lineleading,s.linebreakstyle="before",s.id=this.spanID,!0)}}),MathJax.Hub.Register.StartupHook("TeX mathchoice Ready",function(){e.TeXmathchoice.Augment({HTMLbetterBreak:function(e,t){return this.Core().HTMLbetterBreak(e,t)},HTMLmoveLine:function(e,t,i,n,a){return this.Core().HTMLmoveSlice(e,t,i,n,a)}})}),e.maction.Augment({HTMLbetterBreak:function(e,t){return this.Core().HTMLbetterBreak(e,t)},HTMLmoveLine:function(e,t,i,n,a){return this.Core().HTMLmoveSlice(e,t,i,n,a)},HTMLmoveSlice:function(e,i,n){var a=document.getElementById("MathJax-HitBox-"+this.spanID+t.idPostfix);a&&a.parentNode.removeChild(a);var s=this.SUPER(arguments).HTMLmoveSlice.apply(this,arguments);if(0===i.length){n=this.HTMLspanElement();for(var l=0;n;)a=this.HTMLhandleHitBox(n,"-Continue-"+l),n=n.nextMathJaxSpan,l++}return s}}),e.semantics.Augment({HTMLbetterBreak:function(e,t){return this.data[0]?this.data[0].HTMLbetterBreak(e,t):!1},HTMLmoveLine:function(e,t,i,n,a){return this.data[0]?this.data[0].HTMLmoveSlice(e,t,i,n,a):null}}),MathJax.Hub.Startup.signal.Post("HTML-CSS multiline Ready"),MathJax.Ajax.loadComplete(t.autoloadDir+"/multiline.js")});